# Trade Builder

복잡한 매매 전략 코드 없이 노드 기반 비주얼 에디터로 암호화폐 자동매매 시스템을 설계하고 실행할 수 있는 데스크톱 애플리케이션입니다.

![프로그램 구성](public/프로그램%20구상도.png)

## AssetPage (메인 화면)
- 보유 자산 현황과 실행 중인 매매 로직을 한눈에 모니터링할 수 있는 대시보드입니다.
<img src="public/실행화면1.png" alt="메인화면" width="100%" />

<details> 
  <summary>AssetPage 세부 기능 소개 (클릭)</summary>

### 1. 실시간 자산 모니터링
- **포트폴리오 개요**: 총 자산, ROI(수익률), 오늘의 손익(P/L) 실시간 표시
- **보유 코인 목록**: 각 코인별 보유 수량, 평균 매수가, 현재가, 수익률 확인
- **실시간 가격 업데이트**: Upbit API 연동으로 실시간 시세 반영

### 2. 로직 관리
- **드래그 앤 드롭 재정렬**: 로직 리스트의 순서를 자유롭게 변경
- **로직 실행/중지**: 각 로직별로 독립적으로 실행 및 중지 가능
- **실행 간격 설정**: 로직 실행 주기를 초 단위로 커스터마이징
- **API 키 관리**: 로직별로 독립적인 Upbit API 키 설정

### 3. 다크/라이트 모드
- 사용자 선호에 따라 테마를 전환하여 눈의 피로를 줄이고 작업 환경을 최적화
- Electron Store에 설정 자동 저장

</details>

## LogicEditorPage (로직 편집 화면)
- 매수/매도 조건을 노드로 시각화하여 직관적으로 설계할 수 있는 비주얼 에디터입니다.
<img src="public/실행화면2.png" alt="에디터화면" width="100%" />
<img src="public/로직%20노드%20구성%20v3.png" alt="로직 노드 구성" width="100%" />

<details>
  <summary>LogicEditorPage 세부 기능 소개 (클릭)</summary>
  
### 1. 노드 기반 비주얼 에디터
- **Rete.js 기반 UI**: 드래그 앤 드롭으로 매매 로직을 직관적으로 구성
- **Buy/Sell 그래프 분리**: 매수 조건과 매도 조건을 독립적으로 설계
- **다양한 지표 노드**: RSI, SMA, 최고가, ROI 등 기술적 지표를 노드로 제공
- **논리 연산 노드**: AND, OR, NOT 등으로 복잡한 조건식 구성

### 2. 실시간 로직 테스트 및 실행
- **로그 출력**: 로직 실행 중 각 노드의 연산 결과를 실시간으로 확인
- **세부 로그 토글**: 필요에 따라 상세 로그 출력 여부 조절
- **백그라운드 실행**: 설정한 주기마다 자동으로 매매 조건 평가 및 주문 실행

### 3. 머신러닝 기반 예측 통합 (RL Signal)
- **강화학습 모델 연동**: Python 기반 RL 모델의 매매 신호를 노드로 활용
- **WebSocket 실시간 통신**: RL 프로세스와 실시간으로 신호 교환
- **모델 테스트 패널**: RL 모델의 예측 결과를 실시간으로 확인

### 4. 캔버스 확장/축소 기능
- Buy 또는 Sell 그래프를 전체 화면으로 확장하여 복잡한 로직 편집 용이
- 확장 시 Rete Area 자동 업데이트로 끊김 없는 편집 경험

### 5. JSON 기반 로직 저장/불러오기
- 설계한 로직은 JSON 형식으로 저장되어 버전 관리 및 공유 가능
- Import/Export 기능으로 로직을 파일로 내보내고 가져오기

</details>

## 주요 기능 요약

### 비주얼 노드 기반 전략 설계
- 코드 없이 드래그 앤 드롭으로 매매 전략 구성
- 기술적 지표, 논리 연산, 가격 조건 등을 노드로 조합
- 실시간 그래프 시각화 및 확장/축소 지원

### 자동매매 실행 엔진
- **인터프리터 기반 로직 평가**: AST(추상 구문 트리)를 통해 노드 그래프를 실시간 해석
- **멀티 로직 동시 실행**: 여러 매매 전략을 동시에 독립적으로 실행
- **유연한 실행 주기**: 로직별로 실행 간격(초 단위) 설정 가능

### Upbit API 완벽 통합
- **실시간 시세 조회**: 현재가, 캔들 데이터, 최고가 등 다양한 시장 데이터 접근
- **자동 주문 실행**: 시장가/지정가 매수/매도 자동 처리
- **계좌 관리**: 보유 자산, 잔고, 평균 매수가 실시간 조회
- **로직별 API 키**: 각 로직마다 독립적인 API 인증 설정

### 강화학습(RL) 모델 통합
- Python 기반 RL 모델 프로세스 자동 실행
- WebSocket으로 실시간 매매 신호 수신
- RL Signal 노드를 통해 머신러닝 예측을 전략에 통합

### 안정적인 데이터 관리
- **Electron Store**: 로직, API 키, 설정을 암호화하여 로컬 저장
- **로직별 파일 저장**: 각 로직을 독립적인 JSON 파일로 관리
- **자동 백업**: 로직 변경 시 자동으로 저장

## 시작하기

### 필수 요구사항
- Node.js 18 이상
- Python 3.8 이상 (RL 모델 사용 시)
- Upbit API 키 ([발급 방법](https://upbit.com/service_center/open_api_guide))

### 설치
```bash
npm install
```

### 개발 모드 실행
```bash

# Electron + Vite 동시 실행 (권장)
npm run electron:dev
```

### 프로덕션 빌드
```bash
npm run build
```

### Upbit API 키 설정
1. 메인 화면에서 "API 키 설정" 클릭
2. Upbit에서 발급받은 Access Key와 Secret Key 입력
3. 필요한 권한: `자산 조회`, `주문 조회`, `주문하기`

## 🎯 사용 가능한 노드

### 데이터 소스 노드
1. **Constant** - 상수 값 입력
2. **Current Price** - 현재가 조회
3. **Highest Price** - 특정 기간 최고가 조회
4. **RSI** - RSI(상대강도지수) 계산
5. **SMA** - SMA(단순이동평균) 계산
6. **ROI** - 수익률 계산
7. **RL Signal** - 강화학습 모델 예측값

### 논리 연산 노드
8. **Compare** - 크기 비교 (>, <, >=, <=, ==, !=)
9. **Logic Op** - 논리 연산 (AND, OR)

### 액션 노드
10. **BUY** - 매수 조건 (Buy Graph에서만 유효)
11. **SELL** - 매도 조건 (Sell Graph에서만 유효)

## 🔧 기술 스택

### Frontend
- **React 19** - UI 프레임워크
- **Vite** - 빌드 도구 및 개발 서버
- **Rete.js** - 노드 에디터 라이브러리 ([공식문서](https://retejs.org/))
- **Styled Components** - CSS-in-JS 스타일링
- **TypeScript** - 타입 안전성

### Desktop
- **Electron** - 크로스 플랫폼 데스크톱 앱
- **Electron Store** - 암호화된 로컬 데이터 저장소

### Backend Integration
- **Upbit API** - 암호화폐 거래소 연동
- **WebSocket** - 실시간 RL 모델 통신
- **Python (RL)** - 강화학습 모델 실행 환경

## 📖 사용 예시

### 1. 간단한 RSI 기반 매매 전략
**시나리오**: RSI가 30 이하면 매수, 70 이상이면 매도

#### 매수 로직 (Buy Graph)
1. `RSI` 노드 추가 (기간: 14)
2. `Constant` 노드 추가 (값: 30)
3. `Compare` 노드 추가 (연산자: <=)
4. RSI 출력 → Compare 왼쪽 입력
5. Constant 출력 → Compare 오른쪽 입력
6. `BUY` 노드 추가
7. Compare 출력 → BUY 입력

#### 매도 로직 (Sell Graph)
1. `RSI` 노드 추가 (기간: 14)
2. `Constant` 노드 추가 (값: 70)
3. `Compare` 노드 추가 (연산자: >=)
4. RSI 출력 → Compare 왼쪽 입력
5. Constant 출력 → Compare 오른쪽 입력
6. `SELL` 노드 추가
7. Compare 출력 → SELL 입력

### 2. 복합 조건 전략
**시나리오**: SMA 골든크로스 + RSI 30 이하일 때 매수

1. `SMA` 노드 2개 (단기: 20, 장기: 50)
2. `Compare` 노드로 단기 > 장기 확인
3. `RSI` 노드 + `Compare` 노드로 RSI < 30 확인
4. `Logic Op` 노드(AND)로 두 조건 결합
5. `BUY` 노드로 매수 실행

### 3. RL 모델 활용
1. Python RL 모델 실행 (자동 실행 또는 수동 실행)
2. `RL Signal` 노드 추가
3. RL 모델의 예측값을 다른 지표와 결합하여 매매 결정

## 🌟 아키텍처 특징

### AST 기반 인터프리터
- 노드 그래프를 AST(추상 구문 트리)로 변환하여 실시간 평가
- 토폴로지 정렬로 노드 실행 순서 자동 최적화
- 순환 참조 감지 및 에러 핸들링

### Worker 기반 비동기 실행
- Web Worker를 활용하여 로직 실행 시 메인 스레드 차단 방지
- 여러 로직을 동시에 실행해도 UI 끊김 없음

### 모듈화된 API 관리자
- Upbit API 호출을 전담하는 API Manager 계층
- JWT 기반 인증 자동 처리
- Rate Limiting 고려한 요청 관리

### 확장 가능한 노드 시스템
- 새로운 지표나 전략을 쉽게 노드로 추가 가능
- 각 노드는 독립적인 AST 클래스로 구현
- 입력/출력 타입 안전성 보장

## 📝 라이선스

MIT License

---

**⚠️ 주의사항**
- 암호화폐 거래는 높은 위험을 수반합니다
- 실제 자금으로 거래하기 전 충분한 테스트를 권장합니다
- API 키는 절대 타인과 공유하지 마세요
- 본 소프트웨어 사용으로 인한 손실에 대해 개발자는 책임지지 않습니다